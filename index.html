<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>جدول الحراسة الخاص بالأطر التربوية</title>
<style>
  body { font-family: "Cairo", sans-serif; background: #f3f4f6; display: flex; flex-direction: column; align-items: center; padding: 20px; direction: rtl; }
  h2 { color: #1e3a8a; margin-bottom: 8px; text-align: center; }
  table { border-collapse: collapse; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); width: 95%; max-width: 720px; margin-top: 12px; }
  th, td { border: 1px solid #999; padding: 10px; text-align: center; font-size: 1rem; }
  th { background: #2563eb; color: white; font-weight: 700; }
  caption { caption-side: top; font-weight: 800; margin-bottom: 12px; font-size: 1.2rem; color: #1e3a8a; }
  .controls { margin-bottom: 12px; }
  button { background: #2563eb; color: white; border: none; padding: 8px 16px; margin: 0 4px; border-radius: 8px; cursor: pointer; font-size: 1rem; }
  button:hover { background: #1d4ed8; }
  .month-label { font-weight: bold; color: #1e40af; font-size: 1.1rem; margin: 0 10px; }
  .today { background: #fff9c4 !important; font-weight: bold; color: green; }
</style>
</head>
<body>

<h2>جدول الحراسة الخاص بالأطر التربوية<br>لفترة الغداء الممتدة من 12:00 إلى 13:30</h2>

<div class="controls">
  <button id="prevMonth">⬅️ الشهر السابق</button>
  <span class="month-label" id="monthLabel"></span>
  <button id="nextMonth">الشهر التالي ➡️</button>
</div>

<table>
  <thead>
    <tr>
      <th>اليوم</th>
      <th>التاريخ</th>
      <th>الأسماء</th>
    </tr>
  </thead>
  <tbody id="tableBody"></tbody>
</table>

<script>
const days = ["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"];
const months = ["يناير","فبراير","مارس","أبريل","ماي","يونيو","يوليوز","غشت","شتنبر","أكتوبر","نونبر","دجنبر"];

const today = new Date();
let currentYear = today.getFullYear();
let currentMonth = today.getMonth();
const tbody = document.getElementById("tableBody");
const monthLabel = document.getElementById("monthLabel");
const todayStr = today.toLocaleDateString("en-GB");

// أول يوم الاثنين لبداية العد للتناوب الأسبوعي
const firstWeekMonday = new Date(2025,10,17); // 17/11/2025
const oneWeekMs = 7*24*60*60*1000;

// الأزواج لكل يوم بالتناوب أسبوعياً
const mondayPairs = ["خديجة الوردي - خالد المعزاوي","صباح توهتوه - فاطمة البيضة"];
const tuesdayPairs = ["فاطمة البيضة - صباح توهتوه","فتيحة هلولي - نادية سهبي"];
const wednesdayPairs = ["فاطمة اهريهرة - مريم المسعودي","عائشة امكون - سهام الراشدي"];
const thursdayPairs = ["حفصة امغاري - فتيحة الهلولي","فاطمة اهريهرة - مريم المسعودي"];
const fridayPairs = ["زهرة - صباح توهتوه","زهرة - فاطمة البيضة"];

function getFirstMonday(year, month){
    const d = new Date(year,month,1);
    while(d.getDay()!==1){ d.setDate(d.getDate()+1); }
    return d;
}

function generateMonth(year, month){
    tbody.innerHTML="";
    monthLabel.textContent = `${months[month]} ${year}`;
    let date = getFirstMonday(year, month);

    while(date.getMonth()===month){
        const dayName = days[date.getDay()];
        if(!["السبت","الأحد"].includes(dayName)){
            const tr = document.createElement("tr");
            const tdDay = document.createElement("td");
            const tdDate = document.createElement("td");
            const tdNames = document.createElement("td");

            tdDay.textContent = dayName;
            tdDate.textContent = date.toLocaleDateString("en-GB");

            // حساب رقم الأسبوع منذ 17/11
            let weekNumber = Math.floor((date - firstWeekMonday)/oneWeekMs);
          
            if(dayName==="الاثنين"){ tdNames.textContent = mondayPairs[weekNumber % mondayPairs.length]; }
            else if(dayName==="الثلاثاء"){ tdNames.textContent = tuesdayPairs[weekNumber % tuesdayPairs.length]; }
            else if(dayName==="الأربعاء"){ tdNames.textContent = wednesdayPairs[weekNumber % wednesdayPairs.length]; }
            else if(dayName==="الخميس"){ tdNames.textContent = thursdayPairs[weekNumber % thursdayPairs.length]; }
            else if(dayName==="الجمعة"){ tdNames.textContent = fridayPairs[weekNumber % fridayPairs.length]; }

            if(tdDate.textContent===todayStr){ tr.classList.add("today"); }

            tr.appendChild(tdDay);
            tr.appendChild(tdDate);
            tr.appendChild(tdNames);
            tbody.appendChild(tr);
        }
        date.setDate(date.getDate()+1);
    }
}

// أزرار التنقل بين الشهور
document.getElementById("prevMonth").onclick=()=>{
    currentMonth--;
    if(currentMonth<0){ currentMonth=11; currentYear--; }
    generateMonth(currentYear,currentMonth);
};

document.getElementById("nextMonth").onclick=()=>{
    currentMonth++;
    if(currentMonth>11){ currentMonth=0; currentYear++; }
    generateMonth(currentYear,currentMonth);
};

generateMonth(currentYear,currentMonth);
</script>

</body>
</html>

